terraform {
  required_providers {
    datadog = {
      source = "DataDog/datadog"
    }
  }
}

variable "datadog_api_key" {}
variable "datadog_app_key" {}

provider "datadog" {
  api_key = "${var.datadog_api_key}"
  app_key = "${var.datadog_app_key}"
}

resource "datadog_monitor" "cpumonitor" {

#Required
  name = "cpu monitor - terraform"
  type = "query alert"
  message = "???????????????????????????????????????"
  query = "max(last_5m):avg:system.cpu.user{host:????} > 90"

#Optional
  monitor_thresholds {
    ???? = ??
    ???? = 80
    ???? = 70
    ???? = ??

  }
  ????? = false
  priority = null
  restricted_roles = null

  include_tags = ????
  tags = ["terraform:true" , ????, ????]
  
}
